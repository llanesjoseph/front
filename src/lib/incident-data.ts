import type { Incident } from "@/types";

export const historicalDataCSV = `Date\tTime Called\tTime Arrived\tResolution Time\tLocation
11/29/2020	3:08			Folsom St stairs
12/8/2020	11:35			Main St. stairs
12/13/2020	21:00		9:00:00 PM	Main St. stairs
1/7/2021	22:20			Tower Lobby
1/8/2021	21:00			dog park
1/23/2021	1:20	1:34	1:34:00 AM	Tower Lobby
1/23/2021	1:20	1:34	1:34:00 AM	dog park
2/6/2021	2:05		3:16:00 AM	loading dock
2/27/2021	0:20		12:20:00 AM	Folsom St stairs
3/5/2021	6:15			1D
3/5/2021	5:28			1C
3/8/2021	23:02			Folsom St stairs
3/30/2021	4:41			Tower Lobby
4/13/2021	11:40			Clementina
4/23/2021	4:02		4:05:00 AM	Clementina
4/23/2021	4:40		4:40:00 AM	Folsom St stairs
4/23/2021	4:55		4:55:00 AM	Clementina
4/27/2021	2:40			Clementina
4/28/2021	3:33			Tower Lobby
4/29/2021	13:20		1:20:00 PM	Clementina
4/30/2021	3:03			Podium Lobby
5/1/2021	22:00		10:10:00 PM	Folsom St stairs
5/5/2021	6:00			1A
5/5/2021	22:00			Clementina
5/6/2021	22:24			1A
5/9/2021	2:00			Folsom St stairs
5/12/2021				1C
5/16/2021	0:42			Folsom St stairs
5/27/2021	3:13		3:26:00 AM	Folsom St stairs
7/20/2021	2:52			Folsom St stairs
7/20/2021	2:52			Folsom St stairs
8/1/2021	4:05		4:05:00 AM	Clementina
8/8/2021	23:43			dog park
9/5/2021	2:18			dog park
9/13/2021	2:40			Main St. stairs
9/19/2021	2:06			Folsom St stairs
9/23/2021	1:40	1:46	1:46:00 AM	Folsom St stairs
9/30/2021	3:20			Clementina
10/6/2021	23:31			Folsom St stairs
10/13/2021	4:45			1C
11/6/2021	1:35	1:46	1:46:00 AM	Folsom St stairs
11/7/2021	1:17			Folsom St stairs
11/26/2021				1D
11/28/2021				Folsom St stairs
11/29/2021	4:20			garage
12/4/2021	23:30			Tower Lobby
12/7/2021	0:20			Tower Lobby
12/15/2021	21:13	21:30		garage
12/19/2021	0:21			Folsom St stairs
1/31/2022	23:23	23:40	11:40:00 PM	Folsom St stairs
2/5/2022	1:39			Folsom St stairs
2/9/2022	2:09	2:14	2:14:00 AM	Podium Lobby
2/18/2022	22:30	22:35		Main St. stairs
3/12/2022	2:10	2:14	2:14:00 AM	Main St. stairs
3/12/2022	3:20	3:23	3:23:00 AM	Folsom St stairs
3/29/2022	0:46	0:56	1:00:00 AM	dog park
4/3/2022	23:10	23:16		Sweetgreen
4/4/2022	1:45	1:52		Tower Lobby
4/9/2022	23:02	23:13		Main St. stairs
4/13/2022	3:45	3:53		Main St. stairs
4/22/2022	3:56	4:15	4:15:00 AM	Sweetgreen
5/4/2022	3:13	3:16		Folsom St stairs
5/6/2022	23:00	23:15	11:15:00 PM	Folsom St stairs
5/12/2022	2:00			dog park
5/16/2022	3:22	3:28	3:31:00 AM	Tower Lobby
5/19/2022				Folsom St stairs
5/30/2021	19:31	19:36		Tower Lobby
6/19/2022	1:41			loading dock
6/24/2022	8:15			Tower Lobby
6/28/2022				1C
7/5/2022	21:35	21:44	9:49:00 PM	Tower Lobby
7/12/2022			5:22:00 PM	Folsom St stairs
7/13/2022				Folsom St stairs
7/13/2022	2:53		3:08:00 AM	Tower Lobby
7/24/2022			6:58:00 PM	Tower Lobby
7/29/2022	0:02	0:55			garage
8/17/2022	0:02	0:07			Podium Lobby
8/31/2022	21:21	21:26			garage
9/9/2022	1:10	1:12			Folsom St stairs
9/12/2022	4:08	4:25			Sweetgreen
9/16/2022	0:48	0:52			Clementina
9/17/2022	23:57			Folsom St stairs
9/22/2022	20:11			8:12:00 PM	Folsom St stairs
9/23/2021	6:23			Folsom St stairs
9/27/2022	3:19	3:27			Podium Lobby
10/1/2022	0:02	0:07			Folsom St stairs
10/5/2022	4:04	4:07			Folsom St stairs
10/6/2022	20:06			Folsom St stairs
10/17/2022	1:34	1:44	1:40:00 AM	Tower Lobby
10/18/2022	21:20	21:40	10:03:00 PM	Tower Lobby
11/15/2021				Tower Lobby
11/18/2022	22:28			Tower Lobby
11/28/2022	0:24			Tower Lobby
12/6/2022	21:57			Clementina
12/9/2022	21:03	21:27			Tower Lobby
12/11/2022	0:47	1:01			Podium Lobby
12/13/2022	1:00	1:07			Sweetgreen
12/19/2022	0:07	0:18			Sweetgreen
12/28/2022				Tower Lobby
1/6/2023	22:53	23:23			Tower Lobby
1/14/2023	3:07			Clementina
1/24/2023	0:20	0:28	12:35:00 AM	dog park
2/21/2023	2:09			Podium Lobby
9/22/2023	3:14	3:35			dog park
9/26/2023	23:26	23:45			Sweetgreen
10/7/2023	2:32	2:40			1D
10/11/2023	23:09	23:17			Sweetgreen
10/19/2023	19:24			Tower Lobby
10/27/2023	5:00			Tower Lobby
12/3/2023	18:52			Tower Lobby
1/6/2024	21:37			1D
5/7/2024	0:50	0:58	12:58:00 AM	Folsom St stairs
5/12/2024	1:14	1:40	1:14:00 AM	Folsom St stairs
5/15/2024	2:41	2:55	2:50:00 AM	garage
5/23/2024	2:45	2:53	2:55:00 AM	Podium Lobby
6/5/2024	0:39	0:52	12:55:00 AM	Sweetgreen
6/11/2024	2:59	3:07	3:12:00 AM	Folsom St stairs
7/2/2024	22:41	22:49	11:01:00 AM	1F
8/7/2024	2:04	2:30	2:40:00 AM	Folsom St stairs
9/2/2024	1:37	1:45	1:55:00 AM	Sweetgreen
9/23/2024	3:54	4:14	4:23:00 AM	Folsom St stairs
9/24/2024	3:42	3:52	3:56:00 AM	Folsom St stairs
10/4/2024	22:45	23:00	11:30:00 PM	Sweetgreen
11/12/2024	9:35PM	N/A	N/A	Clementina
11/12/2024	23:27	23:55	12:05:00 AM	1F
11/13/2024	3:13	3:30	3:30:00 AM	dog park
11/13/2024	20:27	20:45	9:08PM	dog park
11/21/2024	2:05	2:33	2:40:00 AM	Clementina
12/6/2024	4:10	4:18	4:18:00 AM	Tower Lobby
12/10/2024	4:40	4:50	4:55:00 AM	loading dock
12/15/2024	0:26	0:42	12:49:00 AM	Sweetgreen
1/7/2025	23:51	0:15	12:20:00 AM	Folsom St stairs
1/15/2025	3:43	3:58	4:01:00 AM	Folsom St stairs
3/4/2025	22:01	22:23	10:10:00 PM	Main St. stairs
3/15/2025	3:51	3:59	4:00:00 AM	Main St. stairs
`;

export function parseCSVData(csv: string): Incident[] {
    const lines = csv.trim().split('\n');
    const incidents: Incident[] = [];
    
    // Skip header line
    for (let i = 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (!line) continue;
        const cols = line.split('\t'); // Tab-separated
        
        if(cols.length < 1) continue;

        const [dateStr, timeCalled, timeArrived, resolutionTime, location] = cols;
        
        try {
            const dateObj = new Date(dateStr);
            if (isNaN(dateObj.getTime())) continue; // Skip invalid dates

            incidents.push({
                dateObj,
                timeCalled: timeCalled || undefined,
                timeArrived: timeArrived || undefined,
                resolutionTime: resolutionTime || undefined,
                location: location || undefined,
                isLegacy: true,
            });
        } catch (e) {
            console.error(`Could not parse date for line: ${line}`, e);
        }
    }
    return incidents;
}
